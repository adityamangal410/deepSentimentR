<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Twitter Airline Sentiment Analysis • deepSentimentR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Twitter Airline Sentiment Analysis">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-78062737-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-78062737-4');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">deepSentimentR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/deepSentimentR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/twitter-airline-sentiment.html">Twitter Airline Sentiment Analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/adityamangal410/deepSentimentR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Twitter Airline Sentiment Analysis</h1>
                        <h4 class="author">Aditya Mangal</h4>
            
            <h4 class="date">2019-05-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/adityamangal410/deepSentimentR/blob/master/vignettes/twitter-airline-sentiment.Rmd"><code>vignettes/twitter-airline-sentiment.Rmd</code></a></small>
      <div class="hidden name"><code>twitter-airline-sentiment.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>deepSentimentR package will enable its users to Query, View and Analyze Sentiment datasets, for example the <a href="http://help.sentiment140.com/for-students/">Sentiment140 Dataset</a>. By default it works on the sentiment140 tweet data set, however, user can provide any other data set too. In general, it supports the following features -</p>
<ul>
<li>Find/Filter the data-set given multiple parameters.</li>
<li>Generate frequency counts and distribution over multiple parameters.</li>
<li>View time-series analysis of data over multiple parameters.</li>
<li>Visualize bigram and word-correlation networks to analyze and understand data.</li>
<li>Predict most probable polarity of a given text based on model trained on sentiment140 data-set.</li>
</ul>
</div>
<div id="use-case" class="section level1">
<h1 class="hasAnchor">
<a href="#use-case" class="anchor"></a>Use case</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(deepSentimentR)</a></code></pre></div>
<p>In order to demonstrate the power of this package, lets pretend to be John, a junior Data Scientist at Alaska Airlines, who is tasked to analyze the user sentiments of it’s competition over twitter. John follows the standard “OSEMN” model to accomplish this goal.</p>
<div id="o-obtain-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#o-obtain-the-data" class="anchor"></a>O: Obtain the Data</h2>
<p>John finds the following “Twitter Airline Sentiment” dataset on - <a href="https://data.world/crowdflower/airline-twitter-sentiment">data.world</a></p>
<p>In this step, John does the following -</p>
<ul>
<li>Read in the data.</li>
<li>Filter-in data with high sentiment confidence and only positive/negative sentiment.</li>
<li>Filter-in data for only the 4 timezone in US &amp; Canada.</li>
<li>Fix datatypes for the required fields.</li>
<li>And finally, rename the columns to the required columns for this package.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">airlines =<span class="st"> </span>readr<span class="op">::</span><span class="kw"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span>(<span class="st">"https://query.data.world/s/aa2xuctpx2ahuwrnljrwy37d4idlup"</span>, </a>
<a class="sourceLine" id="cb2-2" data-line-number="2">                           <span class="dt">col_types =</span> readr<span class="op">::</span><span class="kw"><a href="https://readr.tidyverse.org/reference/cols.html">cols</a></span>(<span class="dt">.default =</span> readr<span class="op">::</span><span class="kw"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_character</a></span>()))</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">airlines <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">airline_sentiment_confidence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(<span class="st">`</span><span class="dt">airline_sentiment:confidence</span><span class="st">`</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(airline_sentiment_confidence <span class="op">&gt;=</span><span class="st"> </span><span class="fl">0.8</span>,</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">         airline_sentiment <span class="op">!=</span><span class="st"> "neutral"</span>,</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">         <span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/NA">is.na</a></span>(user_timezone),</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">         stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(user_timezone, <span class="st">"US &amp; Canada"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(airline_sentiment, tweet_id, tweet_created, airline, name, text)  <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">tweet_created =</span> lubridate<span class="op">::</span><span class="kw"><a href="http://lubridate.tidyverse.org/reference/ymd_hms.html">mdy_hm</a></span>(tweet_created),</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">         <span class="dt">airline_sentiment =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(airline_sentiment <span class="op">==</span><span class="st"> "negative"</span>, <span class="dv">0</span>, <span class="dv">4</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">rename</a></span>(<span class="dt">polarity =</span> airline_sentiment,</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">         <span class="dt">id =</span> tweet_id,</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">         <span class="dt">date =</span> tweet_created,</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">         <span class="dt">query =</span> airline,</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">         <span class="dt">user =</span> name) -&gt;<span class="st"> </span>airlines</a></code></pre></div>
</div>
<div id="s-scrub-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#s-scrub-the-data" class="anchor"></a>S: Scrub the Data</h2>
<p>Scrubbing the data would be the next step for John for use in further steps (all of them present in the data-raw folder of the git hub repo) -</p>
<ul>
<li>Keep only ASCII encoded tweets.</li>
<li>Remove punctuations, html tags, white spaces from the tweet text.</li>
<li>Filter out short length tweets.</li>
</ul>
<p>As in github repo: “data-raw/DATASET.R”</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">filter_and_sub_sample_data &lt;-<span class="st"> </span><span class="cf">function</span>(data, <span class="dt">data_size=</span><span class="dv">50000</span>) {</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(stringi<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stringi/topics/stri_enc_mark">stri_enc_mark</a></span>(.data<span class="op">$</span>text) <span class="op">==</span><span class="st"> "ASCII"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">text =</span> stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span>(text, <span class="st">"&amp;</span><span class="ch">\\</span><span class="st">w+;"</span>, <span class="st">""</span>),</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">           <span class="dt">text =</span> stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span>(text, <span class="st">"^</span><span class="ch">\\</span><span class="st">s+|</span><span class="ch">\\</span><span class="st">s+$"</span>, <span class="st">""</span>),</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">           <span class="dt">text =</span> stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span>(text, <span class="st">"</span><span class="ch">\\</span><span class="st">s+"</span>, <span class="st">" "</span>),</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">           <span class="dt">text =</span> stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span>(text, <span class="st">"[^:|[:punct:]+]"</span>, <span class="st">""</span>),</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">           <span class="dt">text =</span> stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span>(text, <span class="st">" [^[:alnum:]+] "</span>, <span class="st">" "</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nchar">nchar</a></span>(text) <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>,</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">           polarity <span class="op">!=</span><span class="st"> </span><span class="dv">2</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">polarity =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(polarity <span class="op">==</span><span class="st"> </span><span class="dv">4</span>, <span class="st">"Positive"</span>, <span class="st">"Negative"</span>))</a>
<a class="sourceLine" id="cb3-12" data-line-number="12"></a>
<a class="sourceLine" id="cb3-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/dim">dim</a></span>(data)[<span class="dv">1</span>] <span class="op">&lt;</span><span class="st"> </span>data_size) {</a>
<a class="sourceLine" id="cb3-14" data-line-number="14">    data_size =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/dim">dim</a></span>(data)[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb3-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb3-16" data-line-number="16"></a>
<a class="sourceLine" id="cb3-17" data-line-number="17">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">314159</span>)</a>
<a class="sourceLine" id="cb3-18" data-line-number="18">  data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/sample.html">sample_n</a></span>(data_size)</a>
<a class="sourceLine" id="cb3-20" data-line-number="20"></a>
<a class="sourceLine" id="cb3-21" data-line-number="21">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/function">return</a></span>(data)</a>
<a class="sourceLine" id="cb3-22" data-line-number="22">}</a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">airlines &lt;-<span class="st"> </span>airlines <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter_and_sub_sample_data</span>()</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">airlines <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>()</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; Observations: 4,106</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; Variables: 6</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; $ polarity &lt;chr&gt; "Negative", "Positive", "Negative", "Positive", "Negati…</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; $ id       &lt;chr&gt; "5.6779E+17", "5.679E+17", "5.67812E+17", "5.69161E+17"…</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; $ date     &lt;dttm&gt; 2015-02-17 12:57:00, 2015-02-17 20:14:00, 2015-02-17 1…</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; $ query    &lt;chr&gt; "United", "Delta", "US Airways", "Southwest", "Southwes…</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; $ user     &lt;chr&gt; "Tony_Ciccolella", "mypumpkinheads", "btr5017", "DianeF…</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; $ text     &lt;chr&gt; "@nited you'd learn if you listen to your customers...y…</span></a></code></pre></div>
</div>
<div id="e-explore-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#e-explore-the-data" class="anchor"></a>E: Explore the Data</h2>
<p>John sets out to begin an initial exploration of the data by finding answers to the following questions:</p>
<div id="how-many-tweets-by-polarity-for-specific-airlines" class="section level3">
<h3 class="hasAnchor">
<a href="#how-many-tweets-by-polarity-for-specific-airlines" class="anchor"></a>How many tweets by polarity for specific airlines?</h3>
<p>The general sentiment for each of the 6 airlines can be seen using freq_by_polarity function -</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">united &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/freq_by_polarity">freq_by_polarity</a></span>(<span class="dt">data =</span> airlines, <span class="dt">keyword_list =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"@united"</span>))</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">USAirways &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/freq_by_polarity">freq_by_polarity</a></span>(<span class="dt">data =</span> airlines, <span class="dt">keyword_list =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"@USAirways"</span>))</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">southwestair &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/freq_by_polarity">freq_by_polarity</a></span>(<span class="dt">data =</span> airlines, <span class="dt">keyword_list =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"@southwestair"</span>))</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">AmericanAir &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/freq_by_polarity">freq_by_polarity</a></span>(<span class="dt">data =</span> airlines, <span class="dt">keyword_list =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"@AmericanAir"</span>))</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">JetBlue &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/freq_by_polarity">freq_by_polarity</a></span>(<span class="dt">data =</span> airlines, <span class="dt">keyword_list =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"@JetBlue"</span>))</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">VirginAmerica &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/freq_by_polarity">freq_by_polarity</a></span>(<span class="dt">data =</span> airlines, <span class="dt">keyword_list =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"@VirginAmerica"</span>))</a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">gridExtra<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/gridExtra/topics/arrangeGrob">grid.arrange</a></span>(united<span class="op">$</span>plot,</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">            USAirways<span class="op">$</span>plot,</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">            southwestair<span class="op">$</span>plot,</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">            AmericanAir<span class="op">$</span>plot,</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">            JetBlue<span class="op">$</span>plot,</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">            VirginAmerica<span class="op">$</span>plot,</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">            <span class="dt">nrow =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">            <span class="dt">ncol =</span> <span class="dv">3</span>)</a></code></pre></div>
<p><img src="twitter-airline-sentiment_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
<p>Overall, Virgin America has the most balanced number of Positive vs. Negative Tweets and United airlines has the most imbalanced (no surprise there).</p>
</div>
<div id="are-there-more-positive-vs-negative-tweets-on-certain-days" class="section level3">
<h3 class="hasAnchor">
<a href="#are-there-more-positive-vs-negative-tweets-on-certain-days" class="anchor"></a>Are there more positive vs. negative tweets on certain days ?</h3>
<p>Lets see how dates and day of the month correlate to polarity using time_series. Can it be correlated with any public news.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">time_series_results &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/time_series">time_series</a></span>(<span class="dt">data =</span> airlines)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">show</span>(time_series_results<span class="op">$</span>plot_date)</a></code></pre></div>
<p><img src="twitter-airline-sentiment_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">show</span>(time_series_results<span class="op">$</span>plot_day)</a></code></pre></div>
<p><img src="twitter-airline-sentiment_files/figure-html/unnamed-chunk-7-2.png" width="768"> We see a general increase in number of negative tweets from 19th till 23rd Feb 2015. A simple search on Google reveals several bad press articles relating to that near that time -</p>
<pre><code> - [United Airlines](https://www.bbc.com/news/world-us-canada-31439656) 
 - [Southwest Airlines](https://www.bbc.com/news/business-31629480)    

Although how much of this negativity can be attributed to the above 2 example news reports is a topic for another day.</code></pre>
</div>
<div id="which-are-most-common-bigrams-and-how-frequently-do-they-occur" class="section level3">
<h3 class="hasAnchor">
<a href="#which-are-most-common-bigrams-and-how-frequently-do-they-occur" class="anchor"></a>Which are most common bigrams and how frequently do they occur?</h3>
<p>We can use the bigram_network function to view the bigram network:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">bigram_network_results &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/bigram_network">bigram_network</a></span>(<span class="dt">data =</span> airlines, <span class="dt">counts_quantile =</span> <span class="fl">0.99</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw">show</span>(bigram_network_results<span class="op">$</span>plot)</a></code></pre></div>
<p><img src="twitter-airline-sentiment_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
<p>The most common bigrams are also the most obvious ones that can be seen in the above plot like - “customer service” has a very high count (darker arrow), similarly for “cancelled flight” and “boarding pass”. We can also see phrase patterns emerge like - “terrible customer service” or “worst customer relations”.</p>
</div>
<div id="what-are-the-most-correlated-pairs-of-words" class="section level3">
<h3 class="hasAnchor">
<a href="#what-are-the-most-correlated-pairs-of-words" class="anchor"></a>What are the most correlated pairs of words ?</h3>
<p>We can use the word_cor_network to see words which are highly correlated and co-occuring in the tweets</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">word_cor_network_results &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/word_cor_network">word_cor_network</a></span>(<span class="dt">data =</span> airlines)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw">show</span>(word_cor_network_results<span class="op">$</span>plot)</a></code></pre></div>
<p><img src="twitter-airline-sentiment_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
<p>Again, words like “customer” and “service” are highly correlated (darker edge). Also, words like “cancelled” and “flight”, and “waiting” and “gate” are highly correlated words in the tweets.</p>
</div>
</div>
<div id="m-model-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#m-model-the-data" class="anchor"></a>M: Model the Data</h2>
<p>After all that exploration, John sets out to build a model to predict the polarity of tweets using just the text of the tweet (for now)</p>
<div id="deep-neural-network" class="section level3">
<h3 class="hasAnchor">
<a href="#deep-neural-network" class="anchor"></a>Deep Neural Network</h3>
<p>We use 1-D Convolutional Network and LSTM RNN model using Keras and with/without Glove Embeddings to train and predict the polarity of the tweet. Given the small number of samples in our airlines dataset (i.e. 4106 obs.), we can use train_lstm_glove or train_conv_1d_with_glove functions to train a deep neural network, LSTM based Recurrent Neural Network or 1-D Convolutional Network respectively along with pre-trained Glove Embeddings provided by NLP research group in Stanford, (<a href="https://nlp.stanford.edu/projects/glove/" class="uri">https://nlp.stanford.edu/projects/glove/</a>).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/train_lstm_with_glove">train_lstm_with_glove</a></span>(<span class="dt">data =</span> airlines,</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">                                      <span class="dt">glove_file_path =</span> <span class="st">"~/Downloads/glove.6B.100d.txt"</span>,</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">                                      <span class="dt">model_save_path =</span> <span class="st">"train_glove_lstm.rds"</span>)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/train_conv1d_with_glove">train_conv1d_with_glove</a></span>(<span class="dt">data =</span> airlines,</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">                                        <span class="dt">glove_file_path =</span> <span class="st">"~/Downloads/glove.6B.100d.txt"</span>,</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">                                        <span class="dt">model_save_path =</span> <span class="st">"train_glove_conv_1d.rds"</span>)</a></code></pre></div>
<p>We can also use train_lstm or train_conv_1d functions in this package to train deep neural networks, LSTM or 1-D Convolutional Network respectively which will train its own embeddings on the given dataset, although given the small size of the data it may not give as accurate results as compared to glove.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/train_lstm">train_lstm</a></span>(<span class="dt">data =</span> airlines,</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">                           <span class="dt">model_save_path =</span> <span class="st">"train_no_glove_lstm.rds"</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/train_conv_1d">train_conv_1d</a></span>(<span class="dt">data =</span> airlines,</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">                              <span class="dt">model_save_path =</span> <span class="st">"train_no_glove_conv_1d.rds"</span>)</a></code></pre></div>
</div>
</div>
<div id="n-interpret-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#n-interpret-the-data" class="anchor"></a>N: iNterpret the Data</h2>
<div id="predicting-polarity-using-dnn" class="section level3">
<h3 class="hasAnchor">
<a href="#predicting-polarity-using-dnn" class="anchor"></a>Predicting polarity using DNN</h3>
<p>John can use the predict_polarity_keras function in this package which will run the given pre-trained DNN models to make predictions on the airlines dataset.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">lstm_no_glove_results &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/predict_polarity_keras">predict_polarity_keras</a></span>(<span class="dt">data =</span> airlines)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">lstm_glove_results &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/predict_polarity_keras">predict_polarity_keras</a></span>(<span class="dt">data =</span> airlines,</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">                                     <span class="dt">model_load_path =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>, </a>
<a class="sourceLine" id="cb14-4" data-line-number="4">                                   <span class="st">"train_glove_lstm.rds"</span>, </a>
<a class="sourceLine" id="cb14-5" data-line-number="5">                                   <span class="dt">package =</span> <span class="st">"deepSentimentR"</span>, </a>
<a class="sourceLine" id="cb14-6" data-line-number="6">                                   <span class="dt">mustWork =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">conv_1d_no_glove_results &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/predict_polarity_keras">predict_polarity_keras</a></span>(<span class="dt">data =</span> airlines,</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">                                     <span class="dt">model_load_path =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>, </a>
<a class="sourceLine" id="cb14-9" data-line-number="9">                                   <span class="st">"train_no_glove_conv_1d.rds"</span>, </a>
<a class="sourceLine" id="cb14-10" data-line-number="10">                                   <span class="dt">package =</span> <span class="st">"deepSentimentR"</span>, </a>
<a class="sourceLine" id="cb14-11" data-line-number="11">                                   <span class="dt">mustWork =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">conv_1d_glove_results &lt;-<span class="st"> </span>deepSentimentR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/deepSentimentR/topics/predict_polarity_keras">predict_polarity_keras</a></span>(<span class="dt">data =</span> airlines,</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">                                     <span class="dt">model_load_path =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>, </a>
<a class="sourceLine" id="cb14-14" data-line-number="14">                                   <span class="st">"train_glove_conv_1d.rds"</span>, </a>
<a class="sourceLine" id="cb14-15" data-line-number="15">                                   <span class="dt">package =</span> <span class="st">"deepSentimentR"</span>, </a>
<a class="sourceLine" id="cb14-16" data-line-number="16">                                   <span class="dt">mustWork =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">preds_result &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tibble</a></span>(<span class="dt">model =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"LSTM without Glove Embeddings"</span>,</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">                                 <span class="st">"LSTM with Glove Embeddings"</span>,</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">                                 <span class="st">"1-D Convolutional Network without Glove Embeddings"</span>,</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">                                 <span class="st">"1-D Convolutional Network with Glove Embeddings"</span>),</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">                       <span class="dt">accuracy =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(lstm_no_glove_results<span class="op">$</span>accuracy,</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">                                    lstm_glove_results<span class="op">$</span>accuracy,</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">                                    conv_1d_no_glove_results<span class="op">$</span>accuracy,</a>
<a class="sourceLine" id="cb15-8" data-line-number="8">                                    conv_1d_glove_results<span class="op">$</span>accuracy))</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">preds_result</a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="co">#&gt;   model                                              accuracy</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">#&gt;   &lt;chr&gt;                                                 &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="co">#&gt; 1 LSTM without Glove Embeddings                         0.806</span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt; 2 LSTM with Glove Embeddings                            0.781</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="co">#&gt; 3 1-D Convolutional Network without Glove Embeddings    0.743</span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">#&gt; 4 1-D Convolutional Network with Glove Embeddings       0.706</span></a></code></pre></div>
<p>As we can see above, the pre-trained LSTM model without using Glove Embeddings gives the best prediction results for our airlines dataset with an accuracy of about 80.56%.</p>
<p>Based on all the above functionalities provided by our package, John can efficiently and extensively carry out his task of sentiment analysis for his company.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#use-case">Use case</a><ul class="nav nav-pills nav-stacked">
<li><a href="#o-obtain-the-data">O: Obtain the Data</a></li>
      <li><a href="#s-scrub-the-data">S: Scrub the Data</a></li>
      <li><a href="#e-explore-the-data">E: Explore the Data</a></li>
      <li><a href="#m-model-the-data">M: Model the Data</a></li>
      <li><a href="#n-interpret-the-data">N: iNterpret the Data</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Aditya Mangal.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
